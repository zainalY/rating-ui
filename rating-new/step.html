<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
		<!-- Main CSS -->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!-- Icons -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
		<!-- Font Awesome -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />
		<title>Let's get started</title>
	</head>
	<body>
		<div class="container d-flex justify-content-center pt-2">
			<div class="text-center pb-2">
				<h6>Bootstrap 5 - Jquery Multi step form by Crezzur - <a href="https://crezzur.com">https://crezzur.com</a></h6>
			</div>
		</div>
		<div class="container d-flex justify-content-center pt-2">
			<button type="button" class="btn btn-primary btn-sm" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">Display features</button>
		</div>
		<div class="col-12 p-3 collapse" id="collapseExample">
			<div class="card">
				<div class="card-header font-weight-bold">Available features</div>
				<div class="card-body">
					<ul>
						<li>Multi step form using Bootstrap 5, Jquery and CSS</li>
						<li>Automatically percentage calculation of the progress bar</li>
						<li><b>Step 1:</b> Add new user / Search existing user</li>
						<ul>
							<li>Option "Add new user"</li>
							<ul>
								<li>Abilty to click on Next button</li>
							</ul>
							<li>Option Search existing user</li>
							<ul>
								<li>Display input field, which is searchable</li>
								<li>Next button is disabled until a available option is selected from the searchlist.</li>
								<li>Next button will be deactivated when the selected value is being altered.</li>
								<li>When a user is selected the step 2 form will be filled with all available data.</li>
							</ul>
						</ul>
						<li><b>Step 2:</b> User information</li>
						<ul>
							<li>Input field "first name" and "last name" are required to advance to step 3.</li>
							<li>When first and/or last name is empty an invalid warning will be displayed.</li>
						</ul>
					</ul>
				</div>
			</div>
		</div>

		<div class="container d-flex justify-content-center" style="min-width: 720px !important">
			<div class="col-11 col-offset-2">
				<div class="progress mt-3" style="height: 30px">
					<div class="progress-bar progress-bar-striped progress-bar-animated" style="font-weight: bold; font-size: 15px" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
				</div>
				<div class="card mt-3">
					<div class="card-header font-weight-bold">My Bootstrap 5 multi-step-form</div>
					<div class="card-body p-4 step">
						<div class="radio-group row justify-content-between px-3 text-center" style="justify-content: center !important">
							<div class="col-auto me-sm-2 mx-1 card-block py-0 text-center radio">
								<div class="opt-icon"><i class="fas fa-user-plus" style="font-size: 80px; margin-left: 25px"></i></div>
								<p><b>Add new user</b></p>
							</div>
						</div>
						<!-- <div class="searchfield text-center pb-1" style="font-size: 12px">Search for example <b>Gary Hendren</b></div>
						<div class="searchfield input-group px-5">
							<span class="input-group-text" id="basic-addon1"><i class="fas fa-search text-white" aria-hidden="true"></i></span>
							<input id="txt-search" class="form-control" type="text" placeholder="Search" aria-label="Search" />
						</div> -->
						<div id="filter-records" class="mx-5"></div>
					</div>
					<div id="userinfo" class="card-body p-4 step" style="display: none">
						<div class="text-center">
							<h5 class="card-title font-weight-bold pb-2">User information</h5>
						</div>

						<div class="form-group row">
							<div class="col-2"></div>
							<div class="col-4">
								<label for="fname">First Name<b style="color: #dc3545">*</b></label>
								<input type="text" name="name" class="form-control" id="fname" required />
								<div class="invalid-feedback">This field is required</div>
							</div>
							<div class="col-4">
								<label for="lname">Last Name<b style="color: #dc3545">*</b></label>
								<input type="text" class="form-control" id="lname" required />
								<div class="invalid-feedback">This field is required</div>
							</div>
						</div>
						<div class="form-group row pt-2">
							<label for="team" class="col-2 text-end control-label col-form-label">Team</label>
							<div class="col-8">
								<input type="text" class="form-control" id="team" required />
								<div class="invalid-feedback">This field is required</div>
							</div>
						</div>
						<div class="form-group row pt-2">
							<label for="address" class="col-2 text-end control-label col-form-label">Address</label>
							<div class="col-8">
								<input type="text" class="form-control" id="address" />
							</div>
						</div>
						<div class="form-group row pt-2">
							<label for="tel" class="col-2 text-end control-label col-form-label">Tel/Gsm</label>
							<div class="col-8">
								<input type="text" class="form-control" id="tel" />
							</div>
						</div>
						<div class="text-center text-muted"><b style="color: #dc3545">*</b> required fields</div>
					</div>
					<div class="card-body p-5 step" style="display: none">Step 3</div>
					<div class="card-body p-5 step" style="display: none">Step 4</div>
					<div class="card-body p-5 step" style="display: none">Step 5</div>
					<div class="card-footer">
						<button class="action back btn btn-sm btn-outline-warning" style="display: none">Back</button>
						<button class="action next btn btn-sm btn-outline-secondary float-end" disabled="">Next</button>
						<button class="action submit btn btn-sm btn-outline-success float-end" style="display: none">Submit</button>
					</div>
				</div>
			</div>
		</div>
		<div class="container mt-5 mb-5">
			<!-- Footer -->
			<footer>
				<div class="text-center mt-5">
					<p>Develop by Arifin 2022</p>
				</div>
			</footer>
		</div>

		<!-- Optional JavaScript; choose one of the two! -->
		<!-- Main JS -->
		<script src="assets/js/main.js"></script>
		<script src="assets/js/jquery.min.js"></script>
		<script>
			$(".radio-group .radio").on("click", function () {
				$(".selected .fa").removeClass("fa-check");
				$(".radio").removeClass("selected");
				$(this).addClass("selected");
				if ($("#suser").hasClass("selected") == true) {
					$(".next").prop("disabled", true);
					$(".searchfield").show();
				} else {
					setFormFields(false);
					$(".next").prop("disabled", false);
					$("#filter-records").html("");
					$(".searchfield").hide();
				}
			});
			var step = 1;
			$(document).ready(function () {
				stepProgress(step);
			});

			$(".next").on("click", function () {
				var nextstep = false;
				if (step == 2) {
					nextstep = checkForm("userinfo");
				} else {
					nextstep = true;
				}
				if (nextstep == true) {
					if (step < $(".step").length) {
						$(".step").show();
						$(".step")
							.not(":eq(" + step++ + ")")
							.hide();
						stepProgress(step);
					}
					hideButtons(step);
				}
			});

			// ON CLICK BACK BUTTON
			$(".back").on("click", function () {
				if (step > 1) {
					step = step - 2;
					$(".next").trigger("click");
				}
				hideButtons(step);
			});

			// CALCULATE PROGRESS BAR
			stepProgress = function (currstep) {
				var percent = parseFloat(100 / $(".step").length) * currstep;
				percent = percent.toFixed();
				$(".progress-bar")
					.css("width", percent + "%")
					.html(percent + "%");
			};

			// DISPLAY AND HIDE "NEXT", "BACK" AND "SUMBIT" BUTTONS
			hideButtons = function (step) {
				var limit = parseInt($(".step").length);
				$(".action").hide();
				if (step < limit) {
					$(".next").show();
				}
				if (step > 1) {
					$(".back").show();
				}
				if (step == limit) {
					$(".next").hide();
					$(".submit").show();
				}
			};

			function setFormFields(id) {
				if (id != false) {
					// FILL STEP 2 FORM FIELDS
					d = data.find((x) => x.id === id);
					$("#fname").val(d.fname);
					$("#lname").val(d.lname);
					$("#team").val(d.team);
					$("#address").val(d.address);
					$("#tel").val(d.tel);
				} else {
					// EMPTY USER SEARCH INPUT
					$("#txt-search").val("");
					// EMPTY STEP 2 FORM FIELDS
					$("#fname").val("");
					$("#lname").val("");
					$("#team").val("");
					$("#address").val("");
					$("#tel").val("");
				}
			}

			function checkForm(val) {
				// CHECK IF ALL "REQUIRED" FIELD ALL FILLED IN
				var valid = true;
				$("#" + val + " input:required").each(function () {
					if ($(this).val() === "") {
						$(this).addClass("is-invalid");
						valid = false;
					} else {
						$(this).removeClass("is-invalid");
					}
				});
				return valid;
			}
			s;
		</script>
		<!-- Option 1: Bootstrap Bundle with Popper -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	</body>
</html>
